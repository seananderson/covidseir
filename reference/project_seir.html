<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Make a projection with a SEIR fit — project_seir • covidseir</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Make a projection with a SEIR fit — project_seir" />
<meta property="og:description" content="Predict from a fit_seir() object, possibly with a future prediction. By default, the
projection uses the estimated f values (fraction of normal
contacts encountered for those physical distancing). The function also includes
functionality to specify a vector of fixed f values starting on a given
future date." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">covidseir</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/fitting-case-data.html">Fitting COVID-19 case data with covidseir</a>
    </li>
    <li>
      <a href="../articles/restarting.html">Fitting case data in multiple blocks</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Make a projection with a SEIR fit</h1>
    
    <div class="hidden name"><code>project_seir.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Predict from a <code><a href='fit_seir.html'>fit_seir()</a></code> object, possibly with a future prediction. By default, the
projection uses the estimated f values (fraction of normal
contacts encountered for those physical distancing). The function also includes
functionality to specify a vector of fixed f values starting on a given
future date.</p>
    </div>

    <pre class="usage"><span class='fu'>project_seir</span><span class='op'>(</span>
  <span class='va'>obj</span>,
  forecast_days <span class='op'>=</span> <span class='fl'>0</span>,
  f_fixed_start <span class='op'>=</span> <span class='cn'>NULL</span>,
  f_fixed <span class='op'>=</span> <span class='cn'>NULL</span>,
  f_multi <span class='op'>=</span> <span class='cn'>NULL</span>,
  f_multi_seg <span class='op'>=</span> <span class='cn'>NULL</span>,
  iter <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq_along</a></span><span class='op'>(</span><span class='va'>obj</span><span class='op'>$</span><span class='va'>post</span><span class='op'>$</span><span class='va'>R0</span><span class='op'>)</span>,
  return_states <span class='op'>=</span> <span class='cn'>FALSE</span>,
  imported_cases <span class='op'>=</span> <span class='fl'>0</span>,
  imported_window <span class='op'>=</span> <span class='fl'>1</span>,
  parallel <span class='op'>=</span> <span class='cn'>TRUE</span>,
  X <span class='op'>=</span> <span class='va'>obj</span><span class='op'>$</span><span class='va'>stan_data</span><span class='op'>$</span><span class='va'>X</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>obj</th>
      <td><p>Output from <code><a href='fit_seir.html'>fit_seir()</a></code>.</p></td>
    </tr>
    <tr>
      <th>forecast_days</th>
      <td><p>Number of projection days.</p></td>
    </tr>
    <tr>
      <th>f_fixed_start</th>
      <td><p>Optional day to start changing f. Must be set if
<code>f_fixed</code> is set.</p></td>
    </tr>
    <tr>
      <th>f_fixed</th>
      <td><p>An optional vector of fixed f values for the projection.
Should be length <code>forecast_days - (f_fixed_start - nrow(daily_cases) - 1)</code>. I.e. one value per day after <code>f_fixed_start</code> day.</p></td>
    </tr>
    <tr>
      <th>f_multi</th>
      <td><p>Multiplicative vector of f values. Same structure as <code>f_fixed</code>.</p></td>
    </tr>
    <tr>
      <th>f_multi_seg</th>
      <td><p>Which <code>f</code> to use for <code>f_multi</code>.</p></td>
    </tr>
    <tr>
      <th>iter</th>
      <td><p>MCMC iterations to include. Defaults to all.</p></td>
    </tr>
    <tr>
      <th>return_states</th>
      <td><p>Logical for whether to return the ODE states.</p></td>
    </tr>
    <tr>
      <th>imported_cases</th>
      <td><p>Number of cases to import starting on first projection day.</p></td>
    </tr>
    <tr>
      <th>imported_window</th>
      <td><p>Number of days over which to distribute imported cases.</p></td>
    </tr>
    <tr>
      <th>parallel</th>
      <td><p>Use parallel processing via <span class="pkg">future</span> and <span class="pkg">furrr</span>?</p></td>
    </tr>
    <tr>
      <th>X</th>
      <td><p>An optional model matrix that acts additively on log expected cases.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Other arguments to pass to <code><a href='https://mc-stan.org/rstan/reference/stanmodel-method-sampling.html'>rstan::sampling()</a></code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A data frame:</p><dl>
<dt>day</dt><dd><p>Day</p></dd>
<dt>data_type</dt><dd><p>Data-type column from the case data</p></dd>
<dt>mu</dt><dd><p>Expected number of cases</p></dd>
<dt>y_rep</dt><dd><p>Posterior predictive replicate observation</p></dd>
<dt>phi</dt><dd><p>Posterior draw of phi, the NB2 dispersion parameter, if included</p></dd>
<dt>.iteration</dt><dd><p>The MCMC iteration</p></dd>

</dl>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Set a <code><a href='https://rdrr.io/pkg/future/man/plan.html'>future::plan()</a></code> and this function will operate in parallel
across MCMC iterations using <span class="pkg">future</span> and <span class="pkg">furrr</span>.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='va'>cases</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>
  <span class='fl'>0</span>, <span class='fl'>0</span>, <span class='fl'>1</span>, <span class='fl'>3</span>, <span class='fl'>1</span>, <span class='fl'>8</span>, <span class='fl'>0</span>, <span class='fl'>6</span>, <span class='fl'>5</span>, <span class='fl'>0</span>, <span class='fl'>7</span>, <span class='fl'>7</span>, <span class='fl'>18</span>, <span class='fl'>9</span>, <span class='fl'>22</span>, <span class='fl'>38</span>, <span class='fl'>53</span>, <span class='fl'>45</span>, <span class='fl'>40</span>,
  <span class='fl'>77</span>, <span class='fl'>76</span>, <span class='fl'>48</span>, <span class='fl'>67</span>, <span class='fl'>78</span>, <span class='fl'>42</span>, <span class='fl'>66</span>, <span class='fl'>67</span>, <span class='fl'>92</span>, <span class='fl'>16</span>, <span class='fl'>70</span>, <span class='fl'>43</span>, <span class='fl'>53</span>, <span class='fl'>55</span>, <span class='fl'>53</span>, <span class='fl'>29</span>,
  <span class='fl'>26</span>, <span class='fl'>37</span>, <span class='fl'>25</span>, <span class='fl'>45</span>, <span class='fl'>34</span>, <span class='fl'>40</span>, <span class='fl'>35</span>
<span class='op'>)</span>
<span class='co'># Example fixed sample fractions:</span>
<span class='va'>s1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>0.1</span>, <span class='fl'>13</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>0.2</span>, <span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>cases</span><span class='op'>)</span> <span class='op'>-</span> <span class='fl'>13</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># To use parallel processing with multiple chains:</span>
<span class='co'># options(mc.cores = parallel::detectCores() / 2)</span>

<span class='co'># Using the MAP estimate for speed in this example:</span>
<span class='va'>m</span> <span class='op'>&lt;-</span> <span class='fu'><a href='fit_seir.html'>fit_seir</a></span><span class='op'>(</span>
  <span class='va'>cases</span>,
  iter <span class='op'>=</span> <span class='fl'>100</span>,
  i0_prior <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/Log.html'>log</a></span><span class='op'>(</span><span class='fl'>8</span><span class='op'>)</span>, <span class='fl'>0.2</span><span class='op'>)</span>,
  samp_frac_fixed <span class='op'>=</span> <span class='va'>s1</span>,
  fit_type <span class='op'>=</span> <span class='st'>"optimizing"</span>
<span class='op'>)</span>
</div><div class='output co'>#&gt; Finding the MAP estimate.</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>m</span><span class='op'>)</span>
</div><div class='output co'>#&gt; MAP estimate:
#&gt;            i0            R0 start_decline   end_decline        f_s[1] 
#&gt;          7.33          3.13         14.82         21.58          0.22 
#&gt;        phi[1]             e 
#&gt;          6.48          0.82 
#&gt; Mean in constrained space of MVN samples:
#&gt;            i0            R0 start_decline   end_decline        f_s[1] 
#&gt;          7.40          3.14         14.82         21.54          0.23 
#&gt;        phi[1]             e 
#&gt;          7.23          0.83 
#&gt; SD in constrained space of MVN samples:
#&gt;            i0            R0 start_decline   end_decline        f_s[1] 
#&gt;          1.39          0.10          0.60          0.92          0.09 
#&gt;        phi[1]             e 
#&gt;          2.64          0.05 </div><div class='input'>
<span class='va'>p</span> <span class='op'>&lt;-</span> <span class='fu'>project_seir</span><span class='op'>(</span><span class='va'>m</span><span class='op'>)</span>
<span class='va'>p</span>
</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 4,200 x 7</span>
#&gt;      day data_type    mu y_rep   phi .iteration forecast
#&gt;    <span style='color: #949494; font-style: italic;'>&lt;int&gt;</span>     <span style='color: #949494; font-style: italic;'>&lt;int&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>      <span style='color: #949494; font-style: italic;'>&lt;int&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;lgl&gt;</span>   
#&gt; <span style='color: #BCBCBC;'> 1</span>     1         1  1.73     2  10.1          1 FALSE   
#&gt; <span style='color: #BCBCBC;'> 2</span>     2         1  1.99     0  10.1          1 FALSE   
#&gt; <span style='color: #BCBCBC;'> 3</span>     3         1  2.28     3  10.1          1 FALSE   
#&gt; <span style='color: #BCBCBC;'> 4</span>     4         1  2.61     1  10.1          1 FALSE   
#&gt; <span style='color: #BCBCBC;'> 5</span>     5         1  3.00     6  10.1          1 FALSE   
#&gt; <span style='color: #BCBCBC;'> 6</span>     6         1  3.44     4  10.1          1 FALSE   
#&gt; <span style='color: #BCBCBC;'> 7</span>     7         1  3.94     4  10.1          1 FALSE   
#&gt; <span style='color: #BCBCBC;'> 8</span>     8         1  4.52     4  10.1          1 FALSE   
#&gt; <span style='color: #BCBCBC;'> 9</span>     9         1  5.18     4  10.1          1 FALSE   
#&gt; <span style='color: #BCBCBC;'>10</span>    10         1  5.94     2  10.1          1 FALSE   
#&gt; <span style='color: #949494;'># … with 4,190 more rows</span></div><div class='input'>
<span class='va'>obs_dat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>day <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq_along</a></span><span class='op'>(</span><span class='va'>cases</span><span class='op'>)</span>, value <span class='op'>=</span> <span class='va'>cases</span><span class='op'>)</span>

<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://magrittr.tidyverse.org'>magrittr</a></span><span class='op'>)</span> <span class='co'># for %&gt;%</span>
</div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>Attaching package: ‘magrittr’</span></div><div class='output co'>#&gt; <span class='message'>The following object is masked from ‘package:purrr’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    set_names</span></div><div class='input'><span class='fu'><a href='tidy_seir.html'>tidy_seir</a></span><span class='op'>(</span><span class='va'>p</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='plot_projection.html'>plot_projection</a></span><span class='op'>(</span>obs_dat <span class='op'>=</span> <span class='va'>obs_dat</span><span class='op'>)</span>
</div><div class='img'><img src='project_seir-1.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='fu'><a href='tidy_seir.html'>tidy_seir</a></span><span class='op'>(</span><span class='va'>p</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='plot_projection.html'>plot_residuals</a></span><span class='op'>(</span>obs_dat <span class='op'>=</span> <span class='va'>obs_dat</span>, obj <span class='op'>=</span> <span class='va'>m</span><span class='op'>)</span>
</div><div class='img'><img src='project_seir-2.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># for parallel processing (optional)</span>
<span class='co'># future::plan(future::multisession)</span>
<span class='va'>p</span> <span class='op'>&lt;-</span> <span class='fu'>project_seir</span><span class='op'>(</span><span class='va'>m</span>,
  forecast_days <span class='op'>=</span> <span class='fl'>100</span>,
  f_fixed_start <span class='op'>=</span> <span class='fl'>53</span>,
  f_fixed <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>0.7</span>, <span class='fl'>60</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>0.2</span>, <span class='fl'>30</span><span class='op'>)</span><span class='op'>)</span>,
  iter <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>25</span>
<span class='op'>)</span>
<span class='va'>p</span>
</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 3,550 x 8</span>
#&gt;      day data_type    mu y_rep   phi .iteration forecast f_fixed
#&gt;    <span style='color: #949494; font-style: italic;'>&lt;int&gt;</span>     <span style='color: #949494; font-style: italic;'>&lt;int&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>      <span style='color: #949494; font-style: italic;'>&lt;int&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;lgl&gt;</span>    <span style='color: #949494; font-style: italic;'>&lt;lgl&gt;</span>  
#&gt; <span style='color: #BCBCBC;'> 1</span>     1         1  1.73     2  10.1          1 FALSE    FALSE  
#&gt; <span style='color: #BCBCBC;'> 2</span>     2         1  1.99     1  10.1          1 FALSE    FALSE  
#&gt; <span style='color: #BCBCBC;'> 3</span>     3         1  2.28     3  10.1          1 FALSE    FALSE  
#&gt; <span style='color: #BCBCBC;'> 4</span>     4         1  2.61     2  10.1          1 FALSE    FALSE  
#&gt; <span style='color: #BCBCBC;'> 5</span>     5         1  3.00     3  10.1          1 FALSE    FALSE  
#&gt; <span style='color: #BCBCBC;'> 6</span>     6         1  3.44     1  10.1          1 FALSE    FALSE  
#&gt; <span style='color: #BCBCBC;'> 7</span>     7         1  3.94     5  10.1          1 FALSE    FALSE  
#&gt; <span style='color: #BCBCBC;'> 8</span>     8         1  4.52     2  10.1          1 FALSE    FALSE  
#&gt; <span style='color: #BCBCBC;'> 9</span>     9         1  5.18     3  10.1          1 FALSE    FALSE  
#&gt; <span style='color: #BCBCBC;'>10</span>    10         1  5.94     6  10.1          1 FALSE    FALSE  
#&gt; <span style='color: #949494;'># … with 3,540 more rows</span></div><div class='input'><span class='fu'><a href='tidy_seir.html'>tidy_seir</a></span><span class='op'>(</span><span class='va'>p</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='plot_projection.html'>plot_projection</a></span><span class='op'>(</span>obs_dat <span class='op'>=</span> <span class='va'>obs_dat</span><span class='op'>)</span>
</div><div class='img'><img src='project_seir-3.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># fake example to show optional Rt colouring:</span>
<span class='va'>proj</span> <span class='op'>&lt;-</span> <span class='fu'><a href='tidy_seir.html'>tidy_seir</a></span><span class='op'>(</span><span class='va'>p</span><span class='op'>)</span>
<span class='fu'><a href='plot_projection.html'>plot_projection</a></span><span class='op'>(</span><span class='va'>proj</span>, obs_dat <span class='op'>=</span> <span class='va'>obs_dat</span>, Rt <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Lognormal.html'>rlnorm</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>proj</span><span class='op'>)</span><span class='op'>)</span>, col <span class='op'>=</span> <span class='st'>"#00000050"</span><span class='op'>)</span>
</div><div class='img'><img src='project_seir-4.png' alt='' width='700' height='433' /></div><div class='input'>

<span class='co'># Get threshold for increase:</span>
<span class='co'># future::plan(future::multisession) # for parallel processing (optional)</span>
<span class='co'># (only using 40 iterations for a fast example)</span>
<span class='va'>thresh</span> <span class='op'>&lt;-</span> <span class='fu'><a href='get_threshold.html'>get_threshold</a></span><span class='op'>(</span><span class='va'>m</span>, iter <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>40</span>, show_plot <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Projecting 0.3 
#&gt; Projecting 0.47 
#&gt; Projecting 0.63 
#&gt; Projecting 0.8 </div><div class='img'><img src='project_seir-5.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>thresh</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] 0.5571626</div><div class='input'>
<span class='co'># Get doubling time (prevalence is declining in this example)</span>
<span class='fu'><a href='get_doubling_time.html'>get_doubling_time</a></span><span class='op'>(</span><span class='va'>m</span>, iter <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>40</span>, show_plot <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</div><div class='img'><img src='project_seir-6.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt;  [1] -12.206996  -9.120015 -12.842758  -9.945963  -7.811543  -6.515639
#&gt;  [7]  -7.816685  -5.760329 -13.761678 -10.993012  -7.416578  -9.105512
#&gt; [13] -17.026427 -12.731450  -8.465330  -6.481328  -6.337543  -7.559904
#&gt; [19]  -8.182519  -7.880885  -6.774119  -8.785315  -9.527219  -8.329275
#&gt; [25] -10.806046  -8.668513  -7.900398 -35.571056  -6.880035  -9.164080
#&gt; [31]  -6.748669  -9.830272  -7.800595  -8.795443  -8.114695 -14.976421
#&gt; [37] -13.397818  -6.696756 -15.460064  -8.028927</div><div class='input'>
<span class='va'>states_with_Rt</span> <span class='op'>&lt;-</span> <span class='fu'><a href='get_rt.html'>get_rt</a></span><span class='op'>(</span><span class='va'>m</span><span class='op'>)</span>
<span class='va'>states_with_Rt</span>
</div><div class='output co'>#&gt; <span style='color: #949494;'># A tibble: 28,900 x 15</span>
#&gt;    .iteration  time       S    E1    E2     I       Q       R     Sd   E1d   E2d
#&gt;         <span style='color: #949494; font-style: italic;'>&lt;int&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>   <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>   <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>   <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>  <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span>
#&gt; <span style='color: #BCBCBC;'> 1</span>          1 -<span style='color: #BB0000;'>30</span>    1.58<span style='color: #949494;'>e</span>6 0.723 0.181 0.904 4.52<span style='color: #949494;'>e</span><span style='color: #BB0000;'>-8</span> 1.81<span style='color: #949494;'>e</span><span style='color: #BB0000;'>-7</span> 3.52<span style='color: #949494;'>e</span>6  1.61 0.403
#&gt; <span style='color: #BCBCBC;'> 2</span>          1 -<span style='color: #BB0000;'>29.8</span>  1.58<span style='color: #949494;'>e</span>6 0.828 0.175 0.893 1.10<span style='color: #949494;'>e</span><span style='color: #BB0000;'>-2</span> 4.52<span style='color: #949494;'>e</span><span style='color: #BB0000;'>-2</span> 3.52<span style='color: #949494;'>e</span>6  1.85 0.391
#&gt; <span style='color: #BCBCBC;'> 3</span>          1 -<span style='color: #BB0000;'>29.5</span>  1.58<span style='color: #949494;'>e</span>6 0.926 0.175 0.881 2.12<span style='color: #949494;'>e</span><span style='color: #BB0000;'>-2</span> 9.03<span style='color: #949494;'>e</span><span style='color: #BB0000;'>-2</span> 3.52<span style='color: #949494;'>e</span>6  2.06 0.391
#&gt; <span style='color: #BCBCBC;'> 4</span>          1 -<span style='color: #BB0000;'>29.2</span>  1.58<span style='color: #949494;'>e</span>6 1.02  0.180 0.870 3.09<span style='color: #949494;'>e</span><span style='color: #BB0000;'>-2</span> 1.35<span style='color: #949494;'>e</span><span style='color: #BB0000;'>-1</span> 3.52<span style='color: #949494;'>e</span>6  2.27 0.401
#&gt; <span style='color: #BCBCBC;'> 5</span>          1 -<span style='color: #BB0000;'>29</span>    1.58<span style='color: #949494;'>e</span>6 1.10  0.187 0.862 3.99<span style='color: #949494;'>e</span><span style='color: #BB0000;'>-2</span> 1.81<span style='color: #949494;'>e</span><span style='color: #BB0000;'>-1</span> 3.52<span style='color: #949494;'>e</span>6  2.46 0.417
#&gt; <span style='color: #BCBCBC;'> 6</span>          1 -<span style='color: #BB0000;'>28.8</span>  1.58<span style='color: #949494;'>e</span>6 1.19  0.196 0.856 4.85<span style='color: #949494;'>e</span><span style='color: #BB0000;'>-2</span> 2.26<span style='color: #949494;'>e</span><span style='color: #BB0000;'>-1</span> 3.52<span style='color: #949494;'>e</span>6  2.65 0.438
#&gt; <span style='color: #BCBCBC;'> 7</span>          1 -<span style='color: #BB0000;'>28.5</span>  1.58<span style='color: #949494;'>e</span>6 1.27  0.207 0.853 5.65<span style='color: #949494;'>e</span><span style='color: #BB0000;'>-2</span> 2.71<span style='color: #949494;'>e</span><span style='color: #BB0000;'>-1</span> 3.52<span style='color: #949494;'>e</span>6  2.82 0.462
#&gt; <span style='color: #BCBCBC;'> 8</span>          1 -<span style='color: #BB0000;'>28.2</span>  1.58<span style='color: #949494;'>e</span>6 1.34  0.219 0.853 6.42<span style='color: #949494;'>e</span><span style='color: #BB0000;'>-2</span> 3.17<span style='color: #949494;'>e</span><span style='color: #BB0000;'>-1</span> 3.52<span style='color: #949494;'>e</span>6  3.00 0.489
#&gt; <span style='color: #BCBCBC;'> 9</span>          1 -<span style='color: #BB0000;'>28</span>    1.58<span style='color: #949494;'>e</span>6 1.42  0.232 0.856 7.14<span style='color: #949494;'>e</span><span style='color: #BB0000;'>-2</span> 3.63<span style='color: #949494;'>e</span><span style='color: #BB0000;'>-1</span> 3.52<span style='color: #949494;'>e</span>6  3.16 0.517
#&gt; <span style='color: #BCBCBC;'>10</span>          1 -<span style='color: #BB0000;'>27.8</span>  1.58<span style='color: #949494;'>e</span>6 1.49  0.245 0.862 7.84<span style='color: #949494;'>e</span><span style='color: #BB0000;'>-2</span> 4.10<span style='color: #949494;'>e</span><span style='color: #BB0000;'>-1</span> 3.52<span style='color: #949494;'>e</span>6  3.33 0.546
#&gt; <span style='color: #949494;'># … with 28,890 more rows, and 4 more variables: Id &lt;dbl&gt;, Qd &lt;dbl&gt;, Rd &lt;dbl&gt;,</span>
#&gt; <span style='color: #949494;'>#   Rt &lt;dbl&gt;</span></div><div class='input'>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://ggplot2.tidyverse.org'>ggplot2</a></span><span class='op'>)</span>
<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='va'>states_with_Rt</span>, <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span><span class='va'>time</span>, <span class='va'>Rt</span>, group <span class='op'>=</span> <span class='va'>.iteration</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_path.html'>geom_line</a></span><span class='op'>(</span>alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: Removed 12000 row(s) containing missing values (geom_path).</span></div><div class='img'><img src='project_seir-7.png' alt='' width='700' height='433' /></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Sean C. Anderson, Andrew M. Edwards, Madi Yerlanov, Nicola Mulberry, Jessica E. Stockdale, Rebeca C. Falcao, Sarafa A. Iyaniwura, Michael C. Otterstatter, Michael A. Irvine, Naveed Z. Janjua, Daniel Coombs, Caroline Colijn.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


